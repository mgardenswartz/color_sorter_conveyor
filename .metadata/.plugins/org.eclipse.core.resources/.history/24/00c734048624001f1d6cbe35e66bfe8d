/**
 * @file VL53L0X.cpp
 * @brief Pololu Time of Flight sensor driver.
 * @author Max Gardenswartz
 * @date Jun 6, 2024
 */

#include "VL53L0X.h"

VL53L0X::VL53L0X()
{
	// TODO Auto-generated constructor stub

}

void VL53L0X::read_and_print(UART_HandleTypeDef* uart_handle)
{
	VL53L0X_PerformSingleRangingMeasurement(Dev, &RangingData);

	char my_message[100] = "";
	if(RangingData.RangeStatus == 0) {
		int string_length = sprintf((char*) Message, "Measured distance: %i\n\r", RangingData.RangeMilliMeter);
		HAL_UART_Transmit(uart_handle, Message, string_length, HAL_MAX_DELAY);
	} else {
		char msg[7] = "Error\r\n";
		HAL_UART_Transmit(uart_handle, (uint8_t*) msg, strlen(msg), HAL_MAX_DELAY);
}

VL53L0X::~VL53L0X()
{
	// TODO Auto-generated destructor stub
}

